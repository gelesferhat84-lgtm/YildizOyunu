<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>‚≠ê YILDIZ ‚Äì Void Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  width:100%;height:100%;
  background:#000;overflow:hidden;
  font-family:system-ui,-apple-system;
  touch-action:none;
}
#game{
  position:relative;
  width:100%;height:100%;
  background:radial-gradient(circle at top,#0a0f2c,#000);
}
#hud{
  position:absolute;top:10px;left:10px;right:10px;
  display:flex;justify-content:space-between;
  color:#fff;font-size:14px;z-index:10;
}
#player{
  position:absolute;
  width:36px;height:36px;
  border-radius:50%;
  background:gold;
  box-shadow:0 0 20px gold;
}
.star,.void{
  position:absolute;border-radius:50%;
}
.star{
  width:20px;height:20px;
  background:#ffd700;
  box-shadow:0 0 12px gold;
}
.void{
  width:42px;height:42px;
  background:#400;
  box-shadow:0 0 25px red;
}
#message{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  color:white;
  font-size:22px;
  text-align:center;
  pointer-events:none;
  opacity:0;
  transition:.4s;
}
</style>
</head>

<body>
<div id="game">
  <div id="hud">
    <div>‚≠ê <span id="score">0</span></div>
    <div>‚ö° <span id="energy">100</span></div>
    <div>üò® <span id="panic">0</span></div>
    <div>‚¨ÜÔ∏è Lv <span id="level">1</span></div>
  </div>
  <div id="player"></div>
  <div id="message"></div>
</div>

<script>
/* ================= CORE CONSTANTS ================= */
const WORLD={
  gravity:0.6,
  friction:0.98,
  panicLoss:0.35
};
const STATE={RUN:"RUN",DEAD:"DEAD"};

/* ================= ENGINE STATE ================= */
const Engine={
  state:STATE.RUN,
  score:0,
  energy:100,
  panic:0,
  time:0,
  level:1,
  exp:0,
  nextExp:100
};

/* ================= PLAYER BODY ================= */
const player={
  x:innerWidth/2,
  y:innerHeight-120,
  vx:0,vy:0,
  r:18
};
const playerEl=document.getElementById("player");

/* ================= INPUT ================= */
let inputX=player.x;
addEventListener("mousemove",e=>inputX=e.clientX);
addEventListener("touchmove",e=>inputX=e.touches[0].clientX);

/* ================= OBJECT POOLS ================= */
const stars=[],voids=[];
const spawn={star:1200,void:2000};

/* ================= SPAWNERS ================= */
setInterval(()=>Engine.state===STATE.RUN&&spawnStar(),spawn.star);
setInterval(()=>Engine.state===STATE.RUN&&spawnVoid(),spawn.void);

function spawnStar(){
  stars.push({x:Math.random()*innerWidth,y:-20});
}
function spawnVoid(){
  voids.push({x:Math.random()*innerWidth,y:-40});
}

/* ================= MISSIONS ================= */
let mission=null,startScore=0,startTime=0;
const missions=[
  {t:"3 yƒ±ldƒ±z topla",c:()=>Engine.score>=startScore+30,r:()=>gainExp(40)},
  {t:"Panik 10'a √ßƒ±kmasƒ±n",c:()=>Engine.panic<10&&Engine.time>startTime+600,r:()=>gainExp(60)},
  {t:"Enerji %80 √ºst√º",c:()=>Engine.energy>80&&Engine.time>startTime+500,r:()=>gainExp(50)}
];

/* ================= GAME LOOP ================= */
function update(){
  if(Engine.state!==STATE.RUN)return;
  Engine.time++;

  // kontrol + panik bozulmasƒ±
  const loss=Engine.panic*WORLD.panicLoss;
  const target=inputX+(Math.random()-.5)*loss;
  player.vx+=(target-player.x)*0.02;
  player.vx*=WORLD.friction;
  player.vy+=WORLD.gravity;

  player.x+=player.vx;
  player.y+=player.vy;

  if(player.y>innerHeight-80){
    player.y=innerHeight-80;
    player.vy=0;
  }

  // enerji
  Engine.energy-=0.02+Engine.panic*0.01;
  if(Engine.energy<=0)die();

  // yƒ±ldƒ±zlar
  stars.forEach((s,i)=>{
    s.y+=2;
    if(dist(s,player)<player.r+10){
      Engine.score+=10;
      Engine.energy=Math.min(100,Engine.energy+10);
      Engine.panic=Math.max(0,Engine.panic-1);
      gainExp(10);
      stars.splice(i,1);
    }
  });

  // voidler
  voids.forEach((v,i)=>{
    v.y+=3;
    if(dist(v,player)<player.r+20){
      Engine.panic+=5;
      Engine.energy-=15;
      voids.splice(i,1);
    }
  });

  // g√∂rev
  if(!mission){
    mission=missions[Math.floor(Math.random()*missions.length)];
    startScore=Engine.score;
    startTime=Engine.time;
    msg("üéØ "+mission.t);
  }else if(mission.c()){
    mission.r();
    msg("‚úÖ G√∂rev tamamlandƒ±");
    mission=null;
  }

  render();
  requestAnimationFrame(update);
}

/* ================= LEVEL ================= */
function gainExp(x){
  Engine.exp+=x;
  if(Engine.exp>=Engine.nextExp){
    Engine.level++;
    Engine.exp=0;
    Engine.nextExp=Math.floor(Engine.nextExp*1.4);
    WORLD.gravity+=0.05;
    spawn.star*=0.95;
    spawn.void*=0.9;
    Engine.energy=Math.min(100,Engine.energy+20);
    Engine.panic=Math.max(0,Engine.panic-5);
    msg("‚¨ÜÔ∏è LEVEL "+Engine.level);
  }
}

/* ================= RENDER ================= */
function render(){
  playerEl.style.transform=
    `translate(${player.x-player.r}px,${player.y-player.r}px)`;

  score.textContent=Engine.score;
  energy.textContent=Engine.energy.toFixed(0);
  panic.textContent=Engine.panic.toFixed(0);
  level.textContent=Engine.level;

  document.querySelectorAll(".star,.void").forEach(e=>e.remove());
  stars.forEach(s=>{
    const e=document.createElement("div");
    e.className="star";
    e.style.transform=`translate(${s.x}px,${s.y}px)`;
    game.appendChild(e);
  });
  voids.forEach(v=>{
    const e=document.createElement("div");
    e.className="void";
    e.style.transform=`translate(${v.x}px,${v.y}px)`;
    game.appendChild(e);
  });
}

/* ================= HELPERS ================= */
function dist(a,b){return Math.hypot(a.x-b.x,a.y-b.y)}
function msg(t){
  message.textContent=t;
  message.style.opacity=1;
  setTimeout(()=>message.style.opacity=0,1500);
}
function die(){
  Engine.state=STATE.DEAD;
  alert("üíÄ Ka√ßamadƒ±n\nSkor: "+Engine.score+"\nLevel: "+Engine.level);
}

update();
</script>
</body>
</html>
