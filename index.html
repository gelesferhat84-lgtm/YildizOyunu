<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>YILDIZ ‚Äì Uzay Tehdit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
}
canvas{display:block;}
#ui{
  position:fixed;
  top:10px;
  width:100%;
  text-align:center;
  color:white;
  font-family:Arial, sans-serif;
  font-size:22px;
  z-index:10;
}
</style>
</head>
<body>

<div id="ui">‚≠ê 0</div>
<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
resize();
addEventListener("resize",resize);
function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}

/* üåå Arka plan yƒ±ldƒ±zlarƒ± */
const bg=[];
for(let i=0;i<220;i++){
  bg.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.4,a:Math.random()*6});
}

/* üåô Oyuncu */
const player={x:canvas.width/2,y:canvas.height-90,r:34};

/* Oyun nesneleri */
const stars=[];
const meteors=[];
const aliens=[];
const bullets=[];

let score=0;
let gameOver=false;

/* Kontrol */
addEventListener("mousemove",e=>player.x=e.clientX);
addEventListener("touchmove",e=>player.x=e.touches[0].clientX);

/* ‚≠ê Yƒ±ldƒ±z */
setInterval(()=>{
 if(!gameOver)
 stars.push({x:Math.random()*canvas.width,y:-20,r:10,v:1.6});
},700);

/* ‚òÑÔ∏è Meteor */
setInterval(()=>{
 if(!gameOver)
 meteors.push({x:Math.random()*canvas.width,y:-40,r:16,v:5+Math.random()*3});
},1400);

/* üëæ Uzaylƒ± */
setInterval(()=>{
 if(!gameOver)
 aliens.push({
   x:Math.random()*canvas.width,
   y:-60,
   w:60,h:26,
   vy:2,
   state:"in", // in ‚Üí stop ‚Üí out
   timer:0
 });
},4500);

/* üîÑ Oyun d√∂ng√ºs√º */
function loop(){
 ctx.clearRect(0,0,canvas.width,canvas.height);

 /* Arka plan */
 let g=ctx.createLinearGradient(0,0,0,canvas.height);
 g.addColorStop(0,"#050a20");
 g.addColorStop(1,"#000");
 ctx.fillStyle=g;
 ctx.fillRect(0,0,canvas.width,canvas.height);

 bg.forEach(s=>{
  s.a+=0.02;
  ctx.fillStyle=`rgba(255,255,255,${0.4+Math.sin(s.a)*0.6})`;
  ctx.beginPath();
  ctx.arc(s.x,s.y,s.r,0,6.28);
  ctx.fill();
 });

 /* ‚≠ê Yƒ±ldƒ±zlar */
 for(let i=stars.length-1;i>=0;i--){
  let s=stars[i];
  s.y+=s.v;
  ctx.fillStyle="#fff6c8";
  ctx.beginPath();
  ctx.arc(s.x,s.y,s.r,0,6.28);
  ctx.fill();

  if(Math.hypot(s.x-player.x,s.y-player.y)<s.r+player.r){
    stars.splice(i,1);
    score++;
    ui.innerText="‚≠ê "+score;
  }
 }

 /* ‚òÑÔ∏è Meteor */
 for(let i=meteors.length-1;i>=0;i--){
  let m=meteors[i];
  m.y+=m.v;
  ctx.fillStyle="#888";
  ctx.beginPath();
  ctx.arc(m.x,m.y,m.r,0,6.28);
  ctx.fill();
  if(Math.hypot(m.x-player.x,m.y-player.y)<m.r+player.r){
    gameOver=true;
  }
 }

 /* üëæ Uzaylƒ± */
 aliens.forEach(a=>{
  if(a.state==="in"){
    a.y+=a.vy;
    if(a.y>120){ a.state="stop"; a.timer=0; }
  }else if(a.state==="stop"){
    a.timer++;
    if(a.timer%50===0){
      bullets.push({x:a.x+a.w/2,y:a.y+a.h,v:5});
    }
    if(a.timer>180){ a.state="out"; }
  }else{
    a.y-=2;
  }

  ctx.fillStyle="#9ff";
  ctx.fillRect(a.x,a.y,a.w,a.h);
 });

 /* üî´ Ate≈üler */
 for(let i=bullets.length-1;i>=0;i--){
  let b=bullets[i];
  b.y+=b.v;
  ctx.strokeStyle="red";
  ctx.beginPath();
  ctx.moveTo(b.x,b.y);
  ctx.lineTo(b.x,b.y+12);
  ctx.stroke();

  if(Math.hypot(b.x-player.x,b.y-player.y)<player.r){
    gameOver=true;
  }
 }

 /* Oyuncu */
 ctx.strokeStyle="#bdf";
 ctx.lineWidth=4;
 ctx.beginPath();
 ctx.arc(player.x,player.y,player.r,0,6.28);
 ctx.stroke();

 if(!gameOver){
  requestAnimationFrame(loop);
 }else{
  ctx.fillStyle="white";
  ctx.font="28px Arial";
  ctx.fillText("Oyun Bitti",canvas.width/2-70,canvas.height/2);
 }
}
loop();
</script>
</body>
</html>
