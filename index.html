<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Yıldız Oyunu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top, #7a1fa2, #1b0033);
}
#game{
  position:relative;
  width:100vw;
  height:100vh;
}
#panel{
  position:absolute;
  bottom:80px;
  width:140px;
  height:26px;
  left:50%;
  transform:translateX(-50%);
  border-radius:20px;
  background:rgba(255,80,200,0.9);
  box-shadow:0 0 20px #ff6fd8;
}
.item{
  position:absolute;
  user-select:none;
  pointer-events:none;
}
.star{ color:#ffd966; text-shadow:0 0 10px #ffd966; font-size:28px; }
.heart{ color:#ff4d6d; text-shadow:0 0 10px #ff4d6d; font-size:28px; }
.meteor{
  font-size:34px;
  filter:drop-shadow(0 0 12px orange);
}
#ui{
  position:absolute;
  top:10px;
  left:10px;
  color:white;
  font-size:18px;
}
#boxes{
  position:absolute;
  bottom:20px;
  width:100%;
  display:flex;
  justify-content:center;
  gap:10px;
}
.box{
  width:40px;
  height:40px;
  border-radius:10px;
  border:2px solid rgba(255,255,255,0.3);
}
#over{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  color:white;
}
#over button{
  margin-top:15px;
  padding:10px 22px;
  border:none;
  border-radius:14px;
  background:#ff4d6d;
  color:white;
  font-size:18px;
}
</style>
</head>
<body>

<div id="game">
  <div id="ui">Skor: <span id="score">0</span> <span id="lives">❤️❤️❤️</span></div>
  <div id="panel"></div>
  <div id="boxes">
    <div class="box"></div><div class="box"></div><div class="box"></div>
    <div class="box"></div><div class="box"></div><div class="box"></div>
  </div>
  <div id="over">
    <h1>Oyun Bitti</h1>
    <button onclick="location.reload()">Tekrar Oyna</button>
  </div>
</div>

<script>
const game=document.getElementById("game");
const panel=document.getElementById("panel");
const scoreUI=document.getElementById("score");
const livesUI=document.getElementById("lives");
const over=document.getElementById("over");

let panelX=innerWidth/2-70;
let score=0;
let lives=3;
let items=[];
let running=true;

panel.style.left=panelX+"px";

/* PANEL KONTROL */
let hold=false;
addEventListener("pointerdown",()=>hold=true);
addEventListener("pointerup",()=>hold=false);
addEventListener("pointermove",e=>{
  if(!hold) return;
  panelX=e.clientX-panel.offsetWidth/2;
  panelX=Math.max(0,Math.min(innerWidth-panel.offsetWidth,panelX));
  panel.style.left=panelX+"px";
});

/* SPAWN */
function spawn(type){
  const d=document.createElement("div");
  d.className="item "+type;
  d.x=Math.random()*(innerWidth-40);
  d.y=-40;
  d.vy= type==="meteor" ? 3 : 2.2;
  d.textContent= type==="star"?"⭐": type==="heart"?"❤️":"☄️";
  game.appendChild(d);
  items.push(d);
}

for(let i=0;i<6;i++) spawn("meteor");

/* ÇARPIŞMA */
function hit(a,b){
  return a.x<b.offsetLeft+b.offsetWidth &&
         a.x+30>b.offsetLeft &&
         a.y<b.offsetTop+b.offsetHeight &&
         a.y+30>b.offsetTop;
}

/* DÖNGÜ */
function loop(){
  if(!running) return;

  if(Math.random()<0.04) spawn("star");
  if(Math.random()<0.005) spawn("heart");

  items.forEach((it,i)=>{
    it.y+=it.vy;
    it.style.left=it.x+"px";
    it.style.top=it.y+"px";

    if(hit(it,panel)){
      if(it.classList.contains("star")){
        score++;
        scoreUI.textContent=score;
      }
      if(it.classList.contains("heart")){
        lives=Math.min(3,lives+1);
      }
      if(it.classList.contains("meteor")){
        lives--;
        spawn("meteor");
      }
      updateLives();
      it.remove(); items.splice(i,1);
      if(lives<=0) end();
    }

    if(it.y>innerHeight){
      if(it.classList.contains("meteor")) spawn("meteor");
      it.remove(); items.splice(i,1);
    }
  });

  requestAnimationFrame(loop);
}

function updateLives(){
  livesUI.textContent="❤️".repeat(lives);
}

function end(){
  running=false;
  over.style.display="flex";
}

loop();
</script>
</body>
</html>
