<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>YILDIZ â€“ Engine Build v2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  width:100%;height:100%;
  background:#000;
  overflow:hidden;
  font-family:Arial,Helvetica,sans-serif;
}

#game{
  position:relative;
  width:100%;
  height:100%;
  background:radial-gradient(circle at top,#0b1020,#000);
  overflow:hidden;
}

#world{
  position:absolute;
  width:3000px;
  height:100%;
}

#hud{
  position:fixed;
  top:10px;left:10px;right:10px;
  display:flex;
  justify-content:space-between;
  color:#fff;
  font-size:14px;
  z-index:20;
}

.player{
  position:absolute;
  width:40px;height:40px;
  border-radius:50%;
  background:#e6c200;
}

.enemy{
  position:absolute;
  width:36px;height:36px;
  border-radius:50%;
  background:#b00020;
}

.ground{
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:60px;
  background:#111;
}
</style>
</head>

<body>
<div id="game">
  <div id="hud">
    <div>Score: <span id="score">0</span></div>
    <div>Energy: <span id="energy">100</span></div>
  </div>

  <div id="world">
    <div class="player" id="player"></div>
    <div class="ground"></div>
  </div>
</div>

<script>
"use strict";

/* ===================== VECTOR ===================== */
class Vector2{
  constructor(x=0,y=0){this.x=x;this.y=y}
  clone(){return new Vector2(this.x,this.y)}
  add(v){this.x+=v.x;this.y+=v.y;return this}
  sub(v){this.x-=v.x;this.y-=v.y;return this}
  mul(s){this.x*=s;this.y*=s;return this}
  length(){return Math.sqrt(this.x*this.x+this.y*this.y)}
  normalize(){
    const l=this.length();
    if(l>0){this.x/=l;this.y/=l}
    return this;
  }
}

/* ===================== TIME ===================== */
class Time{
  constructor(){this.last=performance.now();this.delta=0}
  update(){
    const n=performance.now();
    this.delta=(n-this.last)/1000;
    if(this.delta>0.033)this.delta=0.033;
    this.last=n;
  }
}
const time=new Time();

/* ===================== BODY ===================== */
class Body{
  constructor(x,y,m=1){
    this.position=new Vector2(x,y);
    this.velocity=new Vector2();
    this.force=new Vector2();
    this.mass=m;
    this.invMass=1/m;
  }
  applyForce(f){this.force.add(f)}
  integrate(dt){
    const acc=this.force.clone().mul(this.invMass);
    this.velocity.add(acc.mul(dt));
    this.position.add(this.velocity.clone().mul(dt));
    this.force.x=0;this.force.y=0;
  }
}

/* ===================== WORLD ===================== */
const World={
  width:3000,
  height:window.innerHeight,
  gravity:new Vector2(0,2000),
  friction:0.88,
  ground:60
};

/* ===================== PLAYER ===================== */
class Player{
  constructor(el){
    this.el=el;
    this.body=new Body(200,World.height-200,1);
    this.radius=20;
    this.speed=2200;
    this.hp=100;
  }

  update(dt,inputX){
    const dx=inputX+camera.x-this.body.position.x;
    this.body.applyForce(new Vector2(dx*6,0));
    this.body.applyForce(World.gravity.clone());

    this.body.integrate(dt);
    this.body.velocity.x*=World.friction;

    const gy=World.height-World.ground-this.radius;
    if(this.body.position.y>gy){
      this.body.position.y=gy;
      this.body.velocity.y=0;
    }
  }

  render(){
    this.el.style.transform=
      `translate(${this.body.position.x-this.radius}px,
                 ${this.body.position.y-this.radius}px)`;
  }
}

/* ===================== ENEMY ===================== */
class Enemy{
  constructor(x){
    this.el=document.createElement("div");
    this.el.className="enemy";
    world.appendChild(this.el);
    this.body=new Body(x,World.height-200,1);
    this.radius=18;
    this.alive=true;
  }

  update(dt){
    const dir=player.body.position.clone()
      .sub(this.body.position).normalize();
    this.body.applyForce(dir.mul(1200));
    this.body.applyForce(World.gravity.clone());
    this.body.integrate(dt);
    this.body.velocity.x*=0.9;

    const gy=World.height-World.ground-this.radius;
    if(this.body.position.y>gy){
      this.body.position.y=gy;
      this.body.velocity.y=0;
    }

    const d=this.body.position.clone()
      .sub(player.body.position).length();
    if(d<this.radius+player.radius){
      Game.energy-=20;
      this.destroy();
    }
  }

  render(){
    this.el.style.transform=
      `translate(${this.body.position.x-this.radius}px,
                 ${this.body.position.y-this.radius}px)`;
  }

  destroy(){
    this.alive=false;
    this.el.remove();
    Game.score+=10;
  }
}

/* ===================== CAMERA ===================== */
const camera={
  x:0,
  update(){
    this.x=player.body.position.x-window.innerWidth/2;
    if(this.x<0)this.x=0;
    if(this.x>World.width-window.innerWidth)
      this.x=World.width-window.innerWidth;
    world.style.transform=`translateX(${-this.x}px)`;
  }
};

/* ===================== INPUT ===================== */
let inputX=window.innerWidth/2;
window.addEventListener("mousemove",e=>inputX=e.clientX);
window.addEventListener("touchmove",e=>{
  inputX=e.touches[0].clientX;
});

/* ===================== GAME ===================== */
const Game={
  score:0,
  energy:100,
  running:true
};

const world=document.getElementById("world");
const player=new Player(document.getElementById("player"));
const enemies=[];

/* spawn enemies */
for(let i=1;i<=10;i++){
  enemies.push(new Enemy(400+i*220));
}

/* ===================== LOOP ===================== */
function loop(){
  time.update();
  if(!Game.running)return;

  player.update(time.delta,inputX);
  player.render();

  enemies.forEach(e=>{
    if(e.alive){
      e.update(time.delta);
      e.render();
    }
  });

  camera.update();

  Game.energy-=time.delta*3;
  if(Game.energy<=0){
    Game.running=false;
    alert("GAME OVER");
  }

  score.textContent=Game.score;
  energy.textContent=Game.energy.toFixed(0);

  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
