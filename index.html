<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>YILDIZ ‚Äì Final Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{margin:0;overflow:hidden;background:#000}
canvas{display:block}
#ui{
 position:fixed;top:10px;width:100%;
 text-align:center;color:white;
 font:22px Arial;z-index:10
}
#restart{
 display:none;
 position:fixed;
 top:55%;
 left:50%;
 transform:translate(-50%,-50%);
 padding:12px 24px;
 font-size:20px;
 border:none;
 border-radius:30px;
 background:#ffcc00;
 cursor:pointer;
 z-index:20
}
</style>
</head>
<body>

<div id="ui">‚≠ê 0</div>
<button id="restart" onclick="location.reload()">üîÅ Tekrar Oyna</button>
<canvas id="game"></canvas>

<script>
const c=document.getElementById("game"),ctx=c.getContext("2d");
c.width=innerWidth;c.height=innerHeight;

const player={x:c.width/2,y:c.height-90,r:34};
const stars=[],meteors=[],aliens=[],bullets=[];
let score=0,gameOver=false;

/* kontrol */
addEventListener("mousemove",e=>player.x=e.clientX);
addEventListener("touchmove",e=>player.x=e.touches[0].clientX);

/* yƒ±ldƒ±z */
setInterval(()=>!gameOver&&stars.push({x:Math.random()*c.width,y:-20,r:10,v:1.5}),700);
/* meteor */
setInterval(()=>!gameOver&&meteors.push({x:Math.random()*c.width,y:-40,r:18,v:5+Math.random()*3}),1300);
/* ufo */
setInterval(()=>!gameOver&&aliens.push({x:Math.random()*c.width,y:-60,state:0,t:0}),4200);

function loop(){
 ctx.clearRect(0,0,c.width,c.height);
 ctx.fillStyle="#020718";ctx.fillRect(0,0,c.width,c.height);

 /* ‚≠ê */
 stars.forEach((s,i)=>{
  s.y+=s.v;
  ctx.fillStyle="#fff6c8";
  ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,6.28);ctx.fill();
  if(Math.hypot(s.x-player.x,s.y-player.y)<s.r+player.r){
   stars.splice(i,1);score++;ui.innerText="‚≠ê "+score;
  }
 });

 /* ‚òÑÔ∏è METEOR ‚Äì ATE≈ûLƒ∞ */
 meteors.forEach((m,i)=>{
  m.y+=m.v;
  let g=ctx.createRadialGradient(m.x,m.y,0,m.x,m.y,30);
  g.addColorStop(0,"#fff");
  g.addColorStop(0.4,"orange");
  g.addColorStop(1,"red");
  ctx.fillStyle=g;
  ctx.beginPath();ctx.arc(m.x,m.y,m.r,0,6.28);ctx.fill();
  if(Math.hypot(m.x-player.x,m.y-player.y)<m.r+player.r) end();
 });

 /* üëæ UFO */
 aliens.forEach(a=>{
  if(a.state===0){a.y+=2;if(a.y>120)a.state=1}
  else if(a.state===1){
   a.t++; if(a.t%50===0) bullets.push({x:a.x,y:a.y+18});
   if(a.t>180)a.state=2;
  }else a.y-=2;

  // g√∂vde
  ctx.fillStyle="#aaa";
  ctx.beginPath();ctx.ellipse(a.x,a.y,35,12,0,0,6.28);ctx.fill();
  // cam
  ctx.fillStyle="rgba(120,200,255,.6)";
  ctx.beginPath();ctx.arc(a.x,a.y-8,10,0,6.28);ctx.fill();
 });

 /* üî´ ate≈ü */
 bullets.forEach((b,i)=>{
  b.y+=5;
  ctx.strokeStyle="red";
  ctx.beginPath();ctx.moveTo(b.x,b.y);ctx.lineTo(b.x,b.y+12);ctx.stroke();
  if(Math.hypot(b.x-player.x,b.y-player.y)<player.r) end();
 });

 /* oyuncu */
 ctx.strokeStyle="#bdf";ctx.lineWidth=4;
 ctx.beginPath();ctx.arc(player.x,player.y,player.r,0,6.28);ctx.stroke();

 if(!gameOver) requestAnimationFrame(loop);
}

function end(){
 gameOver=true;
 restart.style.display="block";
 ctx.fillStyle="white";
 ctx.font="28px Arial";
 ctx.fillText("Oyun Bitti",c.width/2-70,c.height/2);
}

loop();
</script>
</body>
</html>
