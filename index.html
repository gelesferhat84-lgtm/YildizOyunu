<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uzay Oyunu</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top,#5b1c7a,#1b0026);
}

/* HUD */
#hud{
  position:fixed;
  top:10px;
  left:10px;
  color:white;
  font-size:18px;
  z-index:10;
}

/* PANEL – %50 KÜÇÜK */
#panel{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  width:70px;
  height:16px;
  border-radius:20px;
  background:linear-gradient(90deg,#ff5fa2,#ff2d7a);
  box-shadow:0 0 25px rgba(255,80,200,.9);
  touch-action:none;
}

/* NESNE */
.item{
  position:absolute;
  top:-80px;
  pointer-events:none;
}

/* YILDIZ */
.star{
  width:18px;height:18px;
  background:radial-gradient(circle,#ffe680,#ffb300);
  clip-path:polygon(
    50% 0%,61% 35%,98% 35%,
    68% 57%,79% 91%,50% 70%,
    21% 91%,32% 57%,2% 35%,39% 35%
  );
  box-shadow:0 0 12px gold;
}

/* KALP */
.heart{
  width:20px;height:20px;
  background:#ff4d6d;
  transform:rotate(-45deg);
  border-radius:50% 50% 0 0;
  box-shadow:0 0 12px #ff4d6d;
}
.heart::before,.heart::after{
  content:"";
  position:absolute;
  width:20px;height:20px;
  background:#ff4d6d;
  border-radius:50%;
}
.heart::before{top:-10px;left:0;}
.heart::after{left:10px;top:0;}

/* METEOR */
.meteor{
  width:16px;height:16px;
  border-radius:50%;
  background:radial-gradient(circle,#ffb74d,#e65100);
  box-shadow:0 0 25px rgba(255,140,0,.9);
}
.meteor::after{
  content:"";
  position:absolute;
  top:-45px;left:50%;
  transform:translateX(-50%);
  width:6px;height:45px;
  background:linear-gradient(to top,rgba(255,140,0,.8),transparent);
  filter:blur(1px);
}

/* GAME OVER */
#over{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  color:white;
  font-size:32px;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:20;
}
#over button{
  margin-top:15px;
  padding:10px 22px;
  border:none;
  border-radius:12px;
  background:#ff4d6d;
  color:white;
  font-size:18px;
}
</style>
</head>
<body>

<div id="hud">
  Skor: <span id="score">0</span> <span id="lives">❤️❤️❤️</span>
</div>

<div id="panel"></div>

<div id="over">
  Oyun Bitti
  <button onclick="location.reload()">Tekrar Oyna</button>
</div>

<script>
let score=0, lives=3, running=true;
const scoreEl=document.getElementById("score");
const livesEl=document.getElementById("lives");
const panel=document.getElementById("panel");
const over=document.getElementById("over");
const items=[];

/* CAN */
function updateLives(){
  livesEl.textContent="❤️".repeat(lives);
}

/* PANEL */
let drag=false;
panel.addEventListener("pointerdown",()=>drag=true);
addEventListener("pointerup",()=>drag=false);
addEventListener("pointermove",e=>{
  if(!drag) return;
  let x=e.clientX-panel.offsetWidth/2;
  x=Math.max(0,Math.min(innerWidth-panel.offsetWidth,x));
  panel.style.left=x+"px";
});

/* SPAWN */
function spawn(type){
  const el=document.createElement("div");
  el.className="item "+type;
  el.x=Math.random()*(innerWidth-40);
  el.y=-60;
  el.speed=(type==="meteor"?3:2)+Math.random()*0.3;
  el.style.left=el.x+"px";
  document.body.appendChild(el);
  items.push({el,type});
}

/* ÇARPIŞMA */
function hit(a,b){
  return !(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom);
}

/* ANA DÖNGÜ */
function loop(){
  if(!running) return;

  const panelRect=panel.getBoundingClientRect();

  for(let i=items.length-1;i>=0;i--){
    const o=items[i];
    o.el.y+=o.el.speed;
    o.el.style.top=o.el.y+"px";

    const r=o.el.getBoundingClientRect();

    if(hit(r,panelRect)){
      if(o.type==="star") score+=10;
      if(o.type==="heart" && lives<3) lives++;
      if(o.type==="meteor") lives--;
      scoreEl.textContent=score;
      updateLives();
      o.el.remove();
      items.splice(i,1);
      if(lives<=0){running=false;over.style.display="flex";}
      continue;
    }

    if(o.el.y>innerHeight+50){
      o.el.remove();
      items.splice(i,1);
    }
  }

  requestAnimationFrame(loop);
}

/* SPAWN ZAMANLAMA (DENGELİ) */
setInterval(()=>spawn("star"),850+Math.random()*200);
setInterval(()=>spawn("heart"),4800+Math.random()*600);
setInterval(()=>spawn("meteor"),1150+Math.random()*200);

loop();
</script>
</body>
</html>
