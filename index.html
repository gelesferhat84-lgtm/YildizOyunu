<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>YILDIZ Oyunu</title>

<style>
html,body{
  margin:0;padding:0;width:100%;height:100%;overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:radial-gradient(circle at top,#2b0b4f,#05010a);
  touch-action:none;
}
body::before{
  content:"";position:fixed;inset:0;
  background-image:
    radial-gradient(1px 1px at 20% 30%,#fff,transparent),
    radial-gradient(1px 1px at 70% 60%,#fff,transparent),
    radial-gradient(1px 1px at 40% 80%,#fff,transparent);
  opacity:.18;pointer-events:none;
}

/* HUD */
#hud{
  position:fixed;top:14px;left:14px;
  color:white;font-size:18px;z-index:20;
}
#level{font-size:14px;margin-top:4px}
#lives{margin-left:6px}

/* Hik√¢ye */
#storyLine{
  position:fixed;top:60px;left:50%;
  transform:translateX(-50%);
  color:#ffd1e8;font-size:18px;
  text-shadow:0 0 12px rgba(255,150,200,.8);
  opacity:0;z-index:25;
  transition:opacity .5s;
}
#storyLine.show{opacity:1}

/* Panel */
#panel{
  position:fixed;bottom:80px;left:50%;
  transform:translateX(-50%);
  width:60px;height:14px;border-radius:20px;
  background:linear-gradient(90deg,#ff6aa2,#ff2f7a);
  box-shadow:0 0 30px rgba(255,80,180,.9);
  z-index:15;
}

/* Kutular */
#letterBoxes{
  position:fixed;bottom:20px;left:10px;
  display:flex;gap:6px;z-index:16;
}
.box{
  width:28px;height:28px;border-radius:6px;
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.5);
  color:white;display:flex;align-items:center;
  justify-content:center;font-weight:bold;
}
.box.filled{background:rgba(255,255,255,.22)}

/* Objeler */
.item{position:absolute;top:-80px;pointer-events:none}
.star{
  width:18px;height:18px;
  background:radial-gradient(circle,#ffe58a,#ffb300);
  clip-path:polygon(
    50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,
    50% 70%,21% 91%,32% 57%,2% 35%,39% 35%
  );
  box-shadow:0 0 12px gold;
}
.meteor{
  width:16px;height:16px;border-radius:50%;
  background:radial-gradient(circle,#9e9e9e,#424242);
}

/* Final */
#finalOverlay{
  position:fixed;inset:0;
  background:radial-gradient(circle,#14001f,#000);
  display:none;align-items:center;justify-content:center;
  z-index:999;color:white;text-align:center;
}
#finalOverlay button{
  padding:12px 22px;margin-top:14px;
  border:none;border-radius:20px;
  background:#ff4d6d;color:white;
}
</style>
</head>

<body>

<div id="hud">
  Skor: <span id="score">0</span>
  <span id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
  <div id="level">Level: 1</div>
</div>

<div id="storyLine"></div>
<div id="letterBoxes"></div>
<div id="panel"></div>

<div id="finalOverlay">
  <div>
    <h1>‚≠ê YILDIZ ‚≠ê</h1>
    <p>Seni her yerde topladƒ±m‚Ä¶<br>Kalbimde üíñ</p>
    <button onclick="location.reload()">Tekrar Oyna</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

let score = 0;
let lives = 3;
let level = 1;
let speedFactor = 1;
let running = true;

const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const levelEl = document.getElementById("level");
const panel = document.getElementById("panel");

function updateHUD(){
  scoreEl.textContent = score;
  livesEl.textContent = "‚ù§Ô∏è".repeat(lives);
  levelEl.textContent = "Level: " + level;
}

function showStory(){
  const texts=[
    "Yƒ±ldƒ±z gibi parlƒ±yorsun ‚ú®",
    "Kalbim seni se√ßti üíñ",
    "Her par√ßa sana √ßƒ±ktƒ±",
    "Bu bir oyun deƒüil‚Ä¶",
    "Sonunda hep sen varsƒ±n ‚≠ê"
  ];
  const el=document.getElementById("storyLine");
  el.textContent=texts[(level-1)%texts.length];
  el.classList.add("show");
  setTimeout(()=>el.classList.remove("show"),2000);
}

function checkLevel(){
  const nl = Math.floor(score / 20) + 1;
  if(nl !== level){
    level = nl;
    speedFactor += 0.15;
    updateHUD();
    showStory();
  }
}

let dragging=false;
panel.addEventListener("touchstart",()=>dragging=true);
window.addEventListener("touchend",()=>dragging=false);
window.addEventListener("touchmove",e=>{
  if(!dragging) return;
  let x=e.touches[0].clientX-panel.offsetWidth/2;
  x=Math.max(0,Math.min(innerWidth-panel.offsetWidth,x));
  panel.style.left=x+"px";
});

const items=[];

function spawnStar(){
  if(!running) return;
  const el=document.createElement("div");
  el.className="item star";
  el.x=Math.random()*(innerWidth-40);
  el.y=-40;
  el.style.left=el.x+"px";
  document.body.appendChild(el);
  items.push(el);
}

function collide(a,b){
  return !(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom);
}

function loop(){
  if(!running) return;
  const p=panel.getBoundingClientRect();

  for(let i=items.length-1;i>=0;i--){
    const el=items[i];
    el.y+=2*speedFactor;
    el.style.top=el.y+"px";

    if(collide(el.getBoundingClientRect(),p)){
      score+=10;
      updateHUD();
      checkLevel();
      el.remove();
      items.splice(i,1);
    }
    if(el.y>innerHeight){
      el.remove();
      items.splice(i,1);
    }
  }
  requestAnimationFrame(loop);
}

setInterval(spawnStar,900);
updateHUD();
loop();

});
</script>

</body>
</html>
