<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>YILDIZ Oyunu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
html, body {
  margin: 0;
  padding: 0;
  background: radial-gradient(circle at top, #0b0f2a, #02040f);
  overflow: hidden;
  font-family: Arial, sans-serif;
  color: white;
}

/* PANEL */
#panel {
  position: absolute;
  bottom: 90px;
  left: 50%;
  transform: translateX(-50%);
  width: 90px;
  height: 18px;
  background: linear-gradient(180deg, #ff4d6d, #c9184a);
  border-radius: 10px;
  touch-action: none;
}

/* HARF KUTULARI */
#boxes {
  position: absolute;
  bottom: 10px;
  left: 10px;
  display: flex;
  gap: 6px;
}

.box {
  width: 34px;
  height: 34px;
  border-radius: 6px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.35);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 20px;
}

/* HARFLER */
.letter {
  position: absolute;
  font-size: 26px;
  font-weight: bold;
  color: #fff;
}

/* METEOR */
.meteor {
  position: absolute;
  width: 26px;
  height: 26px;
  background: radial-gradient(circle, #ff9f1c, #d00000);
  border-radius: 50%;
}

/* KALP */
.heart {
  position: absolute;
  font-size: 22px;
  color: #ff4d6d;
}

/* UI */
#ui {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 16px;
}

#gameOver {
  display: none;
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.8);
  align-items: center;
  justify-content: center;
  flex-direction: column;
  font-size: 22px;
}
button {
  margin-top: 15px;
  padding: 10px 20px;
  font-size: 16px;
}
</style>
</head>

<body>

<div id="ui">
  ‚ù§Ô∏è <span id="lives">3</span>
</div>

<div id="panel"></div>
<div id="boxes"></div>

<div id="gameOver">
  <div id="finalText"></div>
  <button onclick="location.reload()">Tekrar Oyna</button>
</div>

<script>
/* =======================
   OYUN DEƒûƒ∞≈ûKENLERƒ∞
======================= */
const panel = document.getElementById("panel");
const boxesEl = document.getElementById("boxes");
const livesEl = document.getElementById("lives");
const gameOverEl = document.getElementById("gameOver");
const finalText = document.getElementById("finalText");

let lives = 3;
let gameRunning = true;

/* üîë KRƒ∞Tƒ∞K KISIM ‚Äì I HARFƒ∞ ƒ∞Kƒ∞ KEZ */
const letterSlots = [
  { char: "Y", filled: false },
  { char: "I", filled: false },
  { char: "L", filled: false },
  { char: "D", filled: false },
  { char: "I", filled: false },
  { char: "Z", filled: false }
];

/* KUTULARI OLU≈ûTUR */
letterSlots.forEach(slot => {
  const box = document.createElement("div");
  box.className = "box";
  box.textContent = "";
  boxesEl.appendChild(box);
});

/* PANEL HAREKET */
let dragging = false;
panel.addEventListener("pointerdown", () => dragging = true);
window.addEventListener("pointerup", () => dragging = false);
window.addEventListener("pointermove", e => {
  if (!dragging) return;
  let x = e.clientX - panel.offsetWidth / 2;
  x = Math.max(0, Math.min(window.innerWidth - panel.offsetWidth, x));
  panel.style.left = x + "px";
});

/* HARF SPAWN */
function spawnLetter() {
  if (!gameRunning) return;

  const available = letterSlots
    .map((s, i) => ({...s, index: i}))
    .filter(s => !s.filled);

  if (available.length === 0) {
    finishGame();
    return;
  }

  const chosen = available[Math.floor(Math.random() * available.length)];

  const el = document.createElement("div");
  el.className = "letter";
  el.textContent = chosen.char;
  el.dataset.index = chosen.index;
  el.style.left = Math.random() * (window.innerWidth - 30) + "px";
  el.style.top = "-30px";
  document.body.appendChild(el);

  let y = -30;
  const fall = setInterval(() => {
    if (!gameRunning) {
      clearInterval(fall);
      el.remove();
      return;
    }

    y += 2;
    el.style.top = y + "px";

    const panelRect = panel.getBoundingClientRect();
    const rect = el.getBoundingClientRect();

    if (
      rect.bottom >= panelRect.top &&
      rect.left < panelRect.right &&
      rect.right > panelRect.left
    ) {
      const idx = el.dataset.index;
      letterSlots[idx].filled = true;
      boxesEl.children[idx].textContent = letterSlots[idx].char;
      el.remove();
      clearInterval(fall);
    }

    if (y > window.innerHeight) {
      el.remove();
      clearInterval(fall);
    }
  }, 16);
}

/* METEOR */
function spawnMeteor() {
  if (!gameRunning) return;

  const m = document.createElement("div");
  m.className = "meteor";
  m.style.left = Math.random() * (window.innerWidth - 30) + "px";
  m.style.top = "-30px";
  document.body.appendChild(m);

  let y = -30;
  const fall = setInterval(() => {
    y += 3;
    m.style.top = y + "px";

    const panelRect = panel.getBoundingClientRect();
    const rect = m.getBoundingClientRect();

    if (
      rect.bottom >= panelRect.top &&
      rect.left < panelRect.right &&
      rect.right > panelRect.left
    ) {
      lives--;
      livesEl.textContent = lives;
      m.remove();
      clearInterval(fall);
      if (lives <= 0) endGame(false);
    }

    if (y > window.innerHeight) {
      m.remove();
      clearInterval(fall);
    }
  }, 16);
}

/* KALP */
function spawnHeart() {
  if (!gameRunning) return;
  const h = document.createElement("div");
  h.className = "heart";
  h.textContent = "‚ù§";
  h.style.left = Math.random() * (window.innerWidth - 20) + "px";
  h.style.top = "-20px";
  document.body.appendChild(h);

  let y = -20;
  const fall = setInterval(() => {
    y += 2;
    h.style.top = y + "px";

    const panelRect = panel.getBoundingClientRect();
    const rect = h.getBoundingClientRect();

    if (
      rect.bottom >= panelRect.top &&
      rect.left < panelRect.right &&
      rect.right > panelRect.left
    ) {
      lives++;
      livesEl.textContent = lives;
      h.remove();
      clearInterval(fall);
    }

    if (y > window.innerHeight) {
      h.remove();
      clearInterval(fall);
    }
  }, 16);
}

/* Bƒ∞Tƒ∞≈û */
function finishGame() {
  endGame(true);
}

function endGame(win) {
  gameRunning = false;
  gameOverEl.style.display = "flex";
  finalText.textContent = win
    ? "‚≠ê YILDIZ TAMAMLANDI!"
    : "‚òÑÔ∏è OYUN Bƒ∞TTƒ∞";
}

/* SPAWN D√ñNG√úLERƒ∞ */
setInterval(spawnLetter, 1800);
setInterval(spawnMeteor, 1400);
setInterval(() => {
  if (Math.random() < 0.25) spawnHeart();
}, 3000);
</script>
</body>
</html>
